action_can_consume = {
	combine_into_one = yes
	check_create_action = {
		every_prisoner = {
			limit = {
				OR = {
					AND = {
						OR = {
							is_pool_guest = yes
							is_ruler = yes
						}
						is_alive = yes
					}
					AND = {
						is_ruler = no
						exists = liege
						is_alive = yes
					}
				}
				NOT = { is_at_war_with = root }
				root = {
					is_character_interaction_potentially_accepted = {
						recipient = prev
						interaction = consume_interaction
					}
				}
			}
			try_create_important_action = {
				important_action_type = action_can_consume
				actor = root
				recipient = this
			}
		}
	}

	effect = {
		open_interaction_window = {
			interaction = consume_interaction
			actor = scope:actor
			recipient = scope:recipient
		}
	}
}

action_can_clone = {
	combine_into_one = yes
	check_create_action = {
		every_living_character = {
			limit = {
				OR = { #makes you aware of rivals, nemeses etc you may target now
					has_any_worst_bad_relationship_with_character_trigger = { CHARACTER = root }
					has_any_bad_relationship_with_root_trigger = yes
				}
				root = {
					is_character_interaction_potentially_accepted = {
						recipient = prev
						interaction = skull_corruption_interaction
					}
				}
				
			}
			try_create_important_action = {
				important_action_type = action_can_clone
				actor = root
				recipient = this
			}
		}
	}

	effect = {
		open_interaction_window = {
			interaction = skull_corruption_interaction
			actor = scope:actor
			recipient = scope:recipient
		}
	}
}

#HIRE COURT MAGE
action_can_hire_court_mage = {
	priority = 300
	combine_into_one = yes
	check_create_action = {
		if = {
			limit = {
				NOR = {
					employs_court_position = court_mage_court_position
					any_court_position_holder = {
						type = court_mage_court_position
					}
				}
				monthly_character_income > monthly_character_expenses
			}
			try_create_important_action = {
				important_action_type = action_can_hire_court_mage
				actor = root
			}
		}
	}

	effect = {
		open_appoint_court_position_window = court_mage_court_position
	}
}

# To remind players that they have a Writ of War to be used
action_can_use_writ_of_war = {
	type = alert
	icon = action_morrowind
	combine_into_one = yes
	check_create_action = {
		if = {
			limit = {
				has_character_flag = has_writ_of_war
			}
			try_create_important_action = {
				important_action_type = action_can_use_writ_of_war
				actor = root
			}
		}
	}
}	

# To remind players that they can cast spells!
action_open_spellbook = {
	type = alert
	icon = action_spellbook
	combine_into_one = yes
	check_create_action = {
		if = {
			limit = {
				OR = {
					employs_court_position = court_mage_court_position
					any_court_position_holder = {
						type = court_mage_court_position
					}
					can_magic_trigger = yes
				}
			}
			try_create_important_action = {
				important_action_type = action_open_spellbook
				actor = root
			}
		}
	}

	effect = {
		open_interaction_window = {
			interaction = do_a_magic_interaction
			actor = root
			recipient = root
		}
	}
}

# Magic Tutorial
action_reactive_advice_spellbook = {
	type = tutorial
	icon = generic_reactive_advice
	soundeffect = "event:/SFX/UI/Notifications/TopBar/sfx_ui_notifications_topbar_reactive_advice"
	check_create_action = {
		if = {
			limit = {
				should_show_tutorial_alert = { LESSON = reactive_advice_spellbook }
			}
			try_create_important_action = {
				important_action_type = action_reactive_advice_spellbook
				actor = root
			}
		}
	}
	effect = {
		start_tutorial_lesson = reactive_advice_spellbook
	}
}

action_can_fund = {
	combine_into_one = yes
	check_create_action = {
		if = {
			limit = {
				has_ep1_dlc_trigger = yes
				has_royal_court = no
			}
			every_courtier_or_guest = {
				limit = {
					root = {
						is_character_interaction_potentially_accepted = {
							recipient = prev
							interaction = fund_inspiration_interaction
						}
					}
				}
				try_create_important_action = {
					important_action_type = action_can_fund
					actor = root
					recipient = this
				}
			}
		}
	}

	effect = {
		open_interaction_window = {
			interaction = fund_inspiration_interaction
			actor = scope:actor
			recipient = scope:recipient
		}
	}
}