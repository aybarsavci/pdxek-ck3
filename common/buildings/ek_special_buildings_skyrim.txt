##################
# Skyrim Special Buildings
##################
# Understone Keep
# Palace of Kings
# Blue Palace
# Mead Hall of Jorrvaskr
# Gildergreen
# Ice Fortress of Winterhold
# College of Winterhold
# Sky Haven Temple - TBA
# Ancient Nordic Walls
# Dragonsreach
# Shalidor's Maze
# Volkihar Castle
##################

##########
# Understone Keep
##########
understone_keep_01 = {
	construction_time = very_slow_construction_time

	type_icon = "icon_structure_aurelian_walls.dds"
	
	can_construct_potential = {
		building_requirement_tribal = no
	}
	
	cost_gold = 3000
	
	max_garrison = 500
	
	county_modifier = {
		hostile_raid_time = 0.5
	}
	province_modifier = {
		fort_level = 3
		garrison_size = 0.5
		defender_holding_advantage = 10
		stationed_maa_damage_mult = 0.1
		stationed_maa_toughness_mult = 0.1
		travel_danger = -5
	}
	
	ai_value = {
		base = 100
	}
	
	type = special

	flag = travel_point_of_interest_martial
}

##########
# Ysgramor's Palace
##########
palace_of_kings_01 = {

	construction_time = very_slow_construction_time

	type_icon = "alcazar_segovia.dds"
	
	can_construct_potential = {
		building_requirement_tribal = no
	}
	
	show_disabled = yes
	
	cost_gold = 1000

	character_modifier = {
		powerful_vassal_opinion = 5
		knight_limit = 2
		knight_effectiveness_mult = 0.2
		monthly_dynasty_prestige_mult = 0.05
		monthly_prestige_gain_per_happy_powerful_vassal_add = 0.1
		tyranny_gain_mult = -0.2
		monthly_dynasty_prestige_mult = 0.05
	}
	
	county_modifier = {
		development_growth = 0.2
	}
	
	ai_value = {
		base = 100
		modifier = { # Fill all building slots before going for special buildings
			factor = 0
			free_building_slots > 0
		}
	}
	
	type = special

	flag = travel_point_of_interest_martial
}

##########
# Blue Palace
##########
blue_palace_01 = {

	construction_time = very_slow_construction_time
	effect_desc = feast_cost_discount_max_desc

	type_icon = "icon_structure_hagia_sophia.dds"
	
	can_construct_potential = {
		building_requirement_tribal = no
	}
	
	show_disabled = yes
	
	cost_gold = 1000

	character_modifier = {
		powerful_vassal_opinion = 5
		knight_limit = 2
		knight_effectiveness_mult = 0.2
		monthly_prestige_gain_per_happy_powerful_vassal_add = 0.1
		monthly_dynasty_prestige_mult = 0.05
	}
	
	county_modifier = {
		development_growth = 0.2
	}
	
	ai_value = {
		base = 100
		modifier = { # Fill all building slots before going for special buildings
			factor = 0
			free_building_slots > 0
		}
	}
	
	type = special

	flag = travel_point_of_interest_diplomatic
}

##########
# Mead Hall of Jorrvaskr
##########
jorrvaskr_01 = {
	
	construction_time = very_slow_construction_time
	effect_desc = feast_cost_discount_max_desc

	type_icon = "icon_structure_cathedral_pagan.dds"
	
	can_construct_potential = {
		building_requirement_tribal = no
	}
		
	cost_gold = 1000
	max_garrison = 500

	character_modifier = {
		monthly_prestige_gain_per_happy_powerful_vassal_add = 0.1
		monthly_dynasty_prestige_mult = 0.05
		knight_limit = 2
		knight_effectiveness_mult = 0.1
	}
	
	county_modifier = {
		development_growth_factor = 0.1
		development_growth = 0.1
	}
	
	province_modifier = {
	}
	
	ai_value = {
		base = 100
		modifier = { # Fill all building slots before going for special buildings
			factor = 0
			free_building_slots > 0
		}
	}
	
	type = special

	flag = travel_point_of_interest_martial
}

##########
# Gildergreen
##########
gildergreen_01 = {
	
	construction_time = very_slow_construction_time

	type_icon = "icon_structure_beldama_wyrd_tree.dds"
	
	can_construct_potential = {
		building_requirement_tribal = no
	}
		
	cost_gold = 1000

	character_modifier = {
		monthly_piety = 1
		learning_per_piety_level = 2	
	}
	
	county_modifier = {
		tax_mult = 0.1
		development_growth_factor = 0.1
		development_growth = 0.1
	}
	
	province_modifier = {
	}
	
	ai_value = {
		base = 100
		modifier = { # Fill all building slots before going for special buildings
			factor = 0
			free_building_slots > 0
		}
	}
	
	type = special

	flag = travel_point_of_interest_religious
}

##########
# Ice Fortress of Winterhold
##########
winterhold_fortress_01 = {
	
	construction_time = very_slow_construction_time

	type_icon = "icon_structure_theodosian_walls.dds"
	
	can_construct_potential = {
		building_requirement_tribal = no
	}
		
	cost_gold = 1000

	character_modifier = {
		monthly_dynasty_prestige_mult = 0.05
		learning = 2
		knight_limit = 2		
	}
	
	county_modifier = {
		tax_mult = 0.2
		development_growth_factor = 0.2
	}
	
	province_modifier = {
		fort_level = 2
		defender_holding_advantage = normal_building_advantage_tier_1
		stationed_maa_damage_mult = normal_maa_damage_tier_1
		stationed_maa_toughness_mult = normal_maa_toughness_tier_1
		travel_danger = -10
	}
	
	ai_value = {
		base = 100
		modifier = { # Fill all building slots before going for special buildings
			factor = 0
			free_building_slots > 0
		}
	}
	
	type = special

	flag = travel_point_of_interest_martial
}

##########
# College of Winterhold
##########
winterhold_college_01 = {
	
	construction_time = very_slow_construction_time

	type_icon = "icon_structure_winterhold_college.dds"

	effect_desc = {
		desc = unlocks_building_desc
		triggered_desc = {
			trigger = { has_dlc_feature = wards_and_wardens }
			desc = ek_arcane_university_effect_desc
		}
		triggered_desc = {
			trigger = { has_dlc_feature = tours_and_tournaments }
			desc = university_toto_effect_desc
		}
		triggered_desc = {
			trigger = { has_dlc_feature = royal_court }
			desc = university_roco_effect_desc
		}
		desc = university_effect_desc
	}
	
	can_construct_potential = {
		building_requirement_tribal = no
	}
		
	cost_gold = 1000
	
	character_modifier = {
		monthly_magic_lifestyle_xp_gain_mult = 0.1
		learning = 3		
	}

	character_modifier = {
	}
	
	county_modifier = {
		development_growth_factor = 0.2
		tax_mult = 0.2

	}
	
	province_modifier = {
		stationed_mages_damage_mult = normal_maa_damage_tier_1
		stationed_mages_toughness_mult = normal_maa_toughness_tier_1
		stationed_spellblades_damage_mult = normal_maa_damage_tier_1
		stationed_spellblades_toughness_mult = normal_maa_toughness_tier_1
	}
	
	ai_value = {
		base = 100
		modifier = { # Fill all building slots before going for special buildings
			factor = 0
			free_building_slots > 0
		}
	}
	
	type = special

	flag = travel_point_of_interest_magic
	flag = arcane_education_location
}


nordic_walls_01 = {
	construction_time = very_slow_construction_time

	type_icon = "icon_structure_walls_of_genoa.dds"
	
	can_construct_potential = {
		building_requirement_tribal = no
		OR = {
			barony = title:b_winterhold
			barony = title:b_palace_of_kings
		}
	}
	
	cost_gold = 1000
	
	max_garrison = 150
	
	county_modifier = {
		hostile_raid_time = 0.1
		development_growth_factor = 0.1
	}
	province_modifier = {
		fort_level = 1
		garrison_size = 0.1
		defender_holding_advantage = 2
	}
	
	ai_value = {
		base = 100
		culture_likely_to_fortify_modifier = yes
		modifier = { # Fill all building slots before going for special buildings
			factor = 0
			free_building_slots > 0
		}
	}
	
	type = duchy_capital

	flag = travel_point_of_interest_martial_minor
}

#####
### Dragonsreach dragon prison thing
#####
dragon_prison_01 = {
	construction_time = very_slow_construction_time

	type_icon = "icon_structure_golden_gate_of_kiev.dds"
	
	can_construct_potential = {
		building_requirement_tribal = no
	}
	cost_gold = 1000

	character_modifier = {
		dread_gain_mult = 0.3
		monthly_dynasty_prestige_mult = 0.05
		monthly_prestige_gain_mult = 0.05
	}
	max_garrison = good_building_max_garrison_tier_2
	province_modifier = {
		defender_holding_advantage = normal_building_advantage_tier_1
		fort_level = good_building_fort_level_tier_1
	}
	
	ai_value = {
		base = 100
	}
		
	type = special

	flag = travel_point_of_interest_martial
}

#####
### Shalidor's Maze
#####
shalidors_maze_01 = {
	construction_time = very_slow_construction_time

	type_icon = "icon_structure_stonehenge.dds"
	
	can_construct_potential = {
		building_requirement_tribal = no
	}
	
	cost_gold = 1000
	#NOTE: these effects aren't properly applied to most holders, as it doesn't work when using Theocratic Clergy - the ruler doesn't technically hold it then!
	character_modifier = { 
		monthly_magic_lifestyle_xp_gain_mult = 0.1
		cultural_head_fascination_mult = 0.1
		learning_per_stress_level = 2	
	}
	province_modifier = {
		tax_mult = 0.1
		development_growth_factor = 0.1
		stationed_mages_damage_mult = normal_maa_damage_tier_1
		stationed_mages_toughness_mult = normal_maa_toughness_tier_1
		stationed_spellblades_damage_mult = normal_maa_damage_tier_1
		stationed_spellblades_toughness_mult = normal_maa_toughness_tier_1
	}
	
	ai_value = {
		base = 100
	}
	
	type = special

	flag = travel_point_of_interest_magic

	next_building = shalidors_maze_02
}

shalidors_maze_02 = {
	construction_time = very_slow_construction_time

	type_icon = "icon_structure_stonehenge.dds"
	
	can_construct_potential = {
		building_requirement_tribal = no
	}
	
	
	cost_gold = 1000
	
	character_modifier = {
		monthly_lifestyle_xp_gain_mult = 0.2
		cultural_head_fascination_mult = 0.2
		
		learning_per_prestige_level = 2
	}
	province_modifier = {
		tax_mult = 0.1
		development_growth_factor = 0.1
		stationed_mages_damage_mult = normal_maa_damage_tier_2
		stationed_mages_toughness_mult = normal_maa_toughness_tier_2
		stationed_spellblades_damage_mult = normal_maa_damage_tier_2
		stationed_spellblades_toughness_mult = normal_maa_toughness_tier_2
	}
	
	ai_value = {
		base = 100
	}
	
	type = special

	flag = travel_point_of_interest_magic
}

##########
# Volkihar Castle. It was once a normal castle but was then turned into something much darker.
##########

volkihar_castle_01 = {

	construction_time = very_slow_construction_time

	type_icon = "alcazar_segovia.dds"
	
	can_construct_potential = {
		building_requirement_tribal = no
	}

	can_construct = {
		scope:holder = { is_vampire = yes } 
	}
	
	is_enabled = {
		scope:holder = { is_vampire = yes } 
	}
	
	cost_gold = 1000

	max_garrison = normal_building_max_garrison_tier_1
	
	province_modifier = {
		fort_level = 3
		defender_holding_advantage = normal_building_advantage_tier_2
		stationed_maa_damage_mult = high_maa_damage_tier_1
		stationed_maa_toughness_mult = high_maa_toughness_tier_1
		travel_danger = 10
	}
	character_modifier = {
		dread_gain_mult = 0.1
		monthly_prestige_gain_per_dread_add = 0.05
		enemy_hostile_scheme_phase_duration_add = 1
	}
	
	ai_value = {
		base = 100
		culture_likely_to_fortify_modifier = yes
		modifier = { # Fill all building slots before going for special buildings
			factor = 0
			free_building_slots > 0
		}
	}
	
	type = special

	flag = travel_point_of_interest_martial
}

#########
# Falkreath Graveyard
#########
heroes_graveyard_01 = {
	effect_desc = {
		triggered_desc = {
			trigger = { has_dlc_feature = legends_of_the_dead }
			desc = ek_funeral_cost_discount_max_desc
		}
		triggered_desc = {
			trigger = { has_dlc_feature = legends_of_the_dead }
			desc = ek_funeral_renown_outcome_effect_desc
		}
	}

	#effect_desc = {
	#	desc = ek_graveyard_effect_desc #EK TODO: implement
	#}
	
	construction_time = very_slow_construction_time

	type_icon = "icon_building_graveyard.dds"
		
	is_enabled = {		
		custom_tooltip = {
			text = burial_funeral_building_trigger_desc
			scope:holder.faith = { building_requirement_funeral_doctrine = yes }
		}
	}
	
	show_disabled = yes
	
	cost_gold = 1000

	character_modifier = {
		monthly_piety = 0.25
		monthly_dynasty_prestige_mult = 0.1
		legitimacy_gain_mult = 0.1
		monthly_prestige_gain_mult = 0.1
	}

	county_modifier = {
		county_opinion_add = 5
		levy_size = 0.1
	}

	province_modifier = {
		epidemic_resistance = 20
	}
	
	ai_value = {
		base = 100
	}
	
	type = special

	flag = travel_point_of_interest_religious
}

##################
# Solstheim Special Buildings
##################
# Fahlbtharz Forge
# Tomb of the Snowprince
#########

# Fahlbtharz Forge
fahlbtharz_forge_01 = {
	effect_desc = mines_effect_desc

	construction_time = very_slow_construction_time

	type_icon = "icon_structure_petra.dds"
	
	can_construct_potential = {
		building_requirement_tribal = no
	}
	cost_gold = 1000

	character_modifier = {
		counter_efficiency = 0.05
	}

	province_modifier = {
		monthly_income = 1
		stationed_maa_damage_mult = normal_maa_damage_tier_1
		stationed_maa_toughness_mult = normal_maa_toughness_tier_1
	}
	county_modifier = {
		development_growth = 0.1
		development_growth_factor = 0.2
	}
	
	ai_value = {
		base = 100
	}
	
	type = special

	flag = travel_point_of_interest_economic
}

# Tomb of the Snowprince
snowprince_tomb_01 = {
	cost_gold = 1000

	type_icon = "icon_megalith.dds"

	character_modifier = {
		prowess = 1
		knight_effectiveness_mult = 0.1
		winter_movement_speed = 0.1
		different_culture_opinion = 5
	}

	county_modifier = {
		levy_size = 0.1
	}
	
	province_modifier = {
		defender_holding_advantage = normal_building_advantage_tier_1
	}
	
	ai_value = {
		base = 100
		culture_likely_to_fortify_modifier = yes
		modifier = { # Fill all building slots before going for special buildings
			factor = 0
			free_building_slots > 0
		}
	}
	
	type = special

	flag = travel_point_of_interest_martial
}

##########
# Sacred Walls of Solitude - Doubles as a fortification building
##########
solitude_holy_walls_01 = {
	construction_time = very_slow_construction_time

	type_icon = "icon_structure_aurelian_walls.dds"
	
	can_construct_potential = {
		building_requirement_tribal = no
		barony = title:b_blue_palace
	}
	
	cost_gold = 1000
	
	max_garrison = 150
	
	county_modifier = {
		hostile_raid_time = 0.1
		development_growth_factor = 0.1
	}
	province_modifier = {
		fort_level = 1
		garrison_size = 0.1
		defender_holding_advantage = 2
	}
	
	next_building = solitude_holy_walls_02
	
	ai_value = {
		base = 100
	}
	
	type = duchy_capital

	flag = travel_point_of_interest_martial
}

solitude_holy_walls_02 = { # The old divine enchantments have been refined and strengthened
	construction_time = very_slow_construction_time

	type_icon = "icon_structure_aurelian_walls.dds"
	
	
	
	cost_gold = 2000
	cost_piety = 1000
	
	max_garrison = 500
	
	character_modifier = {
		monthly_piety = 0.25
		holy_order_hire_cost_mult = -0.15
		clergy_opinion = 5
		monthly_county_control_growth_factor = 0.05
	}
	county_modifier = {
		hostile_raid_time = 0.5
		development_growth_factor = 0.2
		development_growth = 0.1
	}
	province_modifier = {
		fort_level = 3
		garrison_size = 0.25
		defender_holding_advantage = 10
	}
	
	ai_value = {
		base = 100
	}
	
	type = duchy_capital

	flag = travel_point_of_interest_martial
}
