### These titles are based on regions, which are tied to nativity regions
# Only cultures natives from the region the kingdoms are based on should be able to unite them
# Iron Orc can unite Craglorn (since they come from here), but Eastmarchers can't

## High Rock - the kingdoms in High Rock are relatively small (compared to say Skyrim), so some can be combined
form_glenumbra_kingdom_decision = {
	picture = { reference = "gfx/interface/illustrations/decisions/ai_decision_title_drift.dds" }

	desc = form_glenumbra_kingdom_decision_desc
	selection_tooltip = form_glenumbra_kingdom_decision_tooltip
	decision_group_type = major

	ai_check_interval = 120

	is_shown = {
		is_landed = yes
		exists = capital_province
		
		can_unify_kingdom_of_is_shown = { REGION = tamriel_high_rock_glenumbra NATIVITY_REGION = glenumbra }
	}

	is_valid = {
		can_unify_kingdom_of_is_valid = { REGION = tamriel_high_rock_glenumbra }
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_at_war = no
	}

	cost = {
		gold = 500
	}

	effect = {
		form_glenumbra_scripted_effect = yes
		if = {
			limit = { has_dlc_feature = legends }
			create_legend_seed = {
				type = legitimizing
				quality = illustrious
				chronicle = new_title
				properties = {
					title = title:k_glenumbra
					founder = root
				}
			}
		}
		trigger_event = { id = ektitulartitle.0001 }
	}
	
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}

form_rivenspire_kingdom_decision = {
	picture = { reference = "gfx/interface/illustrations/decisions/ai_decision_title_drift.dds" }

	desc = form_rivenspire_kingdom_decision_desc
	selection_tooltip = form_rivenspire_kingdom_decision_tooltip
	decision_group_type = major

	ai_check_interval = 120

	is_shown = {
		is_landed = yes
		exists = capital_province
		
		can_unify_kingdom_of_is_shown = { REGION = tamriel_high_rock_rivenspire NATIVITY_REGION = rivenspire }
	}

	is_valid = {
		can_unify_kingdom_of_is_valid = { REGION = tamriel_high_rock_rivenspire }
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_at_war = no
	}

	cost = {
		gold = 500
	}

	effect = {
		form_rivenspire_scripted_effect = yes
		if = {
			limit = { has_dlc_feature = legends }
			create_legend_seed = {
				type = legitimizing
				quality = illustrious
				chronicle = new_title
				properties = {
					title = title:k_rivenspire
					founder = root
				}
			}
		}
		trigger_event = { id = ektitulartitle.0001 }
	}
	
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}

form_greater_wrothgar_kingdom_decision = {
	picture = { reference = "gfx/interface/illustrations/decisions/ai_decision_title_drift.dds" }

	desc = form_greater_wrothgar_kingdom_decision_desc
	selection_tooltip = form_rivenspire_kingdom_decision_tooltip
	decision_group_type = major

	ai_check_interval = 120

	is_shown = {
		is_landed = yes
		exists = capital_province
		
		can_unify_kingdom_of_is_shown = { REGION = tamriel_high_rock_greater_wrothgar NATIVITY_REGION = greater_wrothgar }
	}

	is_valid = {
		can_unify_kingdom_of_is_valid = { REGION = tamriel_high_rock_greater_wrothgar }
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_at_war = no
	}

	cost = {
		gold = 500
	}

	effect = {
		form_greater_wrothgar_scripted_effect = yes
		
		trigger_event = { id = ektitulartitle.0001 }
	}
	
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}

form_bangkorai_kingdom_decision = {
	picture = { reference = "gfx/interface/illustrations/decisions/ai_decision_title_drift.dds" }

	desc = form_bangkorai_kingdom_decision_desc
	selection_tooltip = form_bangkorai_kingdom_decision_tooltip
	decision_group_type = major

	ai_check_interval = 120

	is_shown = {
		is_landed = yes
		exists = capital_province

		# NOTE: scripted differently due to uniting two kingdoms that do not together make up a nativity zone   

		### Iron Orcs can unify Craglorn, but Skaal cannot
		culture = { has_innovation = innovation_native_bangkorai }
		capital_county = { 
            title_province = {
				OR = {
					geographical_region = mundus_tamriel_high_rock_evermore 
					geographical_region = mundus_tamriel_hammerfell_bangkorai
				}
            }
        }   
		### The Kingdom can't be already held
		NOT = { exists = title:k_greater_bangkorai.holder }
		### And it can't have been formed recently (as in, hasn't crumbled already)
		title:k_greater_bangkorai = { is_titular = yes }
		### And we need the right government
		unify_kingdom_government_trigger = yes
	}

	is_valid = {
		# NOTE: scripted differently due to uniting two kingdoms that do not together make up a nativity zone
		completely_controls_region = mundus_tamriel_high_rock_evermore
		completely_controls_region = mundus_tamriel_hammerfell_bangkorai

		unify_small_kingdom_law_trigger = yes
		prestige_level >= 3
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_at_war = no
	}

	cost = {
		gold = 500
	}

	effect = {
		form_bangkorai_scripted_effect = yes
		if = {
			limit = { has_dlc_feature = legends }
			create_legend_seed = {
				type = legitimizing
				quality = illustrious
				chronicle = new_title
				properties = {
					title = title:k_greater_bangkorai
					founder = root
				}
			}
		}
		trigger_event = { id = ektitulartitle.0001 }
	}
	
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}

## Hammerfell
form_craglorn_kingdom_decision = {
	picture = { reference = "gfx/interface/illustrations/decisions/ai_decision_title_drift.dds" }

	desc = form_craglorn_kingdom_decision_desc
	selection_tooltip = form_craglorn_kingdom_decision_tooltip
	decision_group_type = major

	ai_check_interval = 120

	is_shown = {
		is_landed = yes
		exists = capital_province
		
		can_unify_kingdom_of_is_shown = { REGION = tamriel_hammerfell_craglorn NATIVITY_REGION = craglorn }
	}

	is_valid = {
		can_unify_kingdom_of_is_valid = { REGION = tamriel_hammerfell_craglorn }
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_at_war = no
	}

	cost = {
		gold = 500
	}

	effect = {
		form_craglorn_scripted_effect = yes
		
		trigger_event = { id = ektitulartitle.0001 }
	}
	
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}

## Summerset
form_auridon_kingdom_decision = {
	picture = { reference = "gfx/interface/illustrations/decisions/ai_decision_title_drift.dds" }

	desc = form_auridon_kingdom_decision_desc
	selection_tooltip = form_auridon_kingdom_decision_tooltip
	decision_group_type = major

	ai_check_interval = 120

	is_shown = {
		is_landed = yes
		exists = capital_province
		
		can_unify_kingdom_of_is_shown = { REGION = tamriel_summerset_isles_auridon NATIVITY_REGION = auridon }
	}

	is_valid = {
		can_unify_kingdom_of_is_valid = { REGION = tamriel_summerset_isles_auridon }
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_at_war = no
	}

	cost = {
		gold = 500
	}

	effect = {
		form_auridon_scripted_effect = yes
		
		trigger_event = { id = ektitulartitle.0001 }
	}
	
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}

#Form Elsweyr for ai
form_elsweyr_ai_decision = {
	picture = { reference = "gfx/interface/illustrations/decisions/ai_decision_title_drift.dds" }

	desc = form_elsweyr_ai_decision_desc
	selection_tooltip = form_elsweyr_ai_decision_tooltip
	decision_group_type = major

	ai_check_interval = 120

	is_shown = {
		exists = capital_province
		is_landed = yes
		is_independent_ruler = yes
		#Does not have de jure land, this is because Mane keeps titular titles
		NOT = { title:e_elsweyr = { any_in_de_jure_hierarchy = { tier = tier_county } } }
		capital_province = { geographical_region = mundus_tamriel_elsweyr } #Capital is in Cyrodiil
		OR = {
			is_ai = yes
			debug_only = yes
		}
	}

	is_valid = {
		OR = {
			has_title = title:e_pellitine
			has_title = title:e_anequina
			has_title = title:d_mane
		}
		prestige_level >= 3
		legitimacy_level >= 3
		custom_tooltip = {
            text = restore_elsweyr_percentage
            any_county_in_region = { #Need to control 75% of Elsweyr
                region = mundus_tamriel_elsweyr
                percent > 0.75
                holder.top_liege = root
            }
        }
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_at_war = no
	}

	cost = { # Zeroed out requirements since this is now AI only
		gold = 0
		prestige = 0
		piety = 0
	}

	effect = {
		reform_elsweyr_ai_scripted_effect = yes
	}
	
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}
#Form Skyrim for ai
form_skyrim_ai_decision = {
	picture = { reference = "gfx/interface/illustrations/decisions/ai_decision_title_drift.dds" }

	desc = form_skyrim_ai_decision_desc
	selection_tooltip = form_skyrim_ai_decision_tooltip
	decision_group_type = major

	ai_check_interval = 120

	is_shown = {
		exists = capital_province
		is_landed = yes
		is_independent_ruler = yes
		NOT = { exists = title:e_skyrim.holder }
		capital_province = { geographical_region = mundus_tamriel_skyrim } #Capital is in Skyrim
		OR = {
			is_ai = yes
			debug_only = yes
		}
	}

	is_valid = {
		OR = {
			has_title = title:e_western_skyrim
			has_title = title:e_eastern_skyrim
		}
		prestige_level >= 3
		legitimacy_level >= 3
		custom_tooltip = {
            text = restore_skyrim_percentage
            any_county_in_region = { #Need to control 75% of Cyrodiil
                region = mundus_tamriel_skyrim
                percent > 0.75
                holder.top_liege = root
            }
        }
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_at_war = no
	}

	cost = { # Zeroed out requirements since this is now AI only
		gold = 0
		prestige = 0
		piety = 0
	}

	effect = {
		reform_skyrim_ai_scripted_effect = yes
	}
	
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}