ek_grant_adventurers_world_effect = {
	random_list = {		
		# High Rock
		1 = {
			trigger = { 
				any_character_with_royal_court = {
					exists = capital_province 
					capital_province = { 
						geographical_region = mundus_tamriel_high_rock 
					} 
				} 
			}
			inspiration_region_court_grandeur_attraction_modifier = { GEOGRAPHICAL_REGION = mundus_tamriel_high_rock }
			inspiration_region_oversaturation_penalty_modifier = { GEOGRAPHICAL_REGION = mundus_tamriel_high_rock }
			ek_grant_new_adventurer_in_region_effect = { GEOGRAPHICAL_REGION = mundus_tamriel_high_rock }
		}
		# Hammerfell
		1 = {
			trigger = { 
				any_character_with_royal_court = {
					exists = capital_province 
					capital_province = { 
						geographical_region = mundus_tamriel_hammerfell
					}
				} 
			}
			inspiration_region_court_grandeur_attraction_modifier = { GEOGRAPHICAL_REGION = mundus_tamriel_hammerfell }
			inspiration_region_oversaturation_penalty_modifier = { GEOGRAPHICAL_REGION = mundus_tamriel_hammerfell }
			ek_grant_new_adventurer_in_region_effect = { GEOGRAPHICAL_REGION = mundus_tamriel_hammerfell }
		}
		# Cyrodiil
		1 = {
			trigger = { 
				any_character_with_royal_court = {
					exists = capital_province 
					capital_province = { 
						geographical_region = mundus_tamriel_cyrodiil
					}
				} 
			}
			inspiration_region_court_grandeur_attraction_modifier = { GEOGRAPHICAL_REGION = mundus_tamriel_cyrodiil }
			inspiration_region_oversaturation_penalty_modifier = { GEOGRAPHICAL_REGION = mundus_tamriel_cyrodiil }
			ek_grant_new_adventurer_in_region_effect = { GEOGRAPHICAL_REGION = mundus_tamriel_cyrodiil }
		}
		# Skyrim
		1 = {
			trigger = { 
				any_character_with_royal_court = {
					exists = capital_province 
					capital_province = { 
						geographical_region = mundus_tamriel_skyrim
					}
				} 
			}
			inspiration_region_court_grandeur_attraction_modifier = { GEOGRAPHICAL_REGION = mundus_tamriel_skyrim }
			inspiration_region_oversaturation_penalty_modifier = { GEOGRAPHICAL_REGION = mundus_tamriel_skyrim }
			ek_grant_new_adventurer_in_region_effect = { GEOGRAPHICAL_REGION = mundus_tamriel_skyrim }
		}
		# Summerset Isles
		1 = {
			trigger = { 
				any_character_with_royal_court = {
					exists = capital_province 
					capital_province = { 
						geographical_region = mundus_tamriel_summerset_isles
					} 
				} 
			}
			inspiration_region_court_grandeur_attraction_modifier = { GEOGRAPHICAL_REGION = mundus_tamriel_summerset_isles }
			inspiration_region_oversaturation_penalty_modifier = { GEOGRAPHICAL_REGION = mundus_tamriel_summerset_isles }
			ek_grant_new_adventurer_in_region_effect = { GEOGRAPHICAL_REGION = mundus_tamriel_summerset_isles }
		}
		# Valenwood
		1 = {
			trigger = { 
				any_character_with_royal_court = {
					exists = capital_province 
					capital_province = { 
						geographical_region = mundus_tamriel_valenwood
					} 
				} 
			}
			inspiration_region_court_grandeur_attraction_modifier = { GEOGRAPHICAL_REGION = mundus_tamriel_valenwood }
			inspiration_region_oversaturation_penalty_modifier = { GEOGRAPHICAL_REGION = mundus_tamriel_valenwood }
			ek_grant_new_adventurer_in_region_effect = { GEOGRAPHICAL_REGION = mundus_tamriel_valenwood }
		}
		# Elsweyr
		1 = {
			trigger = { 
				any_character_with_royal_court = {
					exists = capital_province 
					capital_province = { 
						geographical_region = mundus_tamriel_elsweyr
					} 
				} 
			}
			inspiration_region_court_grandeur_attraction_modifier = { GEOGRAPHICAL_REGION = mundus_tamriel_elsweyr }
			inspiration_region_oversaturation_penalty_modifier = { GEOGRAPHICAL_REGION = mundus_tamriel_elsweyr }
			ek_grant_new_adventurer_in_region_effect = { GEOGRAPHICAL_REGION = mundus_tamriel_elsweyr }
		}
		# Morrowind
		1 = {
			trigger = { 
				any_character_with_royal_court = {
					exists = capital_province 
					capital_province = { 
						geographical_region = mundus_tamriel_morrowind
					} 
				} 
			}
			inspiration_region_court_grandeur_attraction_modifier = { GEOGRAPHICAL_REGION = mundus_tamriel_morrowind }
			inspiration_region_oversaturation_penalty_modifier = { GEOGRAPHICAL_REGION = mundus_tamriel_morrowind }
			ek_grant_new_adventurer_in_region_effect = { GEOGRAPHICAL_REGION = mundus_tamriel_morrowind }
		}
		# Black Marsh
		1 = {
			trigger = { 
				any_character_with_royal_court = {
					exists = capital_province 
					capital_province = { 
						geographical_region = mundus_tamriel_black_marsh
					} 
				} 
			}
			inspiration_region_court_grandeur_attraction_modifier = { GEOGRAPHICAL_REGION = mundus_tamriel_black_marsh }
			inspiration_region_oversaturation_penalty_modifier = { GEOGRAPHICAL_REGION = mundus_tamriel_black_marsh }
			ek_grant_new_adventurer_in_region_effect = { GEOGRAPHICAL_REGION = mundus_tamriel_black_marsh }
		}
		# Reach
		1 = {
			trigger = { 
				any_character_with_royal_court = {
					exists = capital_province 
					capital_province = { 
						geographical_region = mundus_tamriel_reach
					} 
				} 
			}
			inspiration_region_court_grandeur_attraction_modifier = { GEOGRAPHICAL_REGION = mundus_tamriel_reach }
			inspiration_region_oversaturation_penalty_modifier = { GEOGRAPHICAL_REGION = mundus_tamriel_reach }
			ek_grant_new_adventurer_in_region_effect = { GEOGRAPHICAL_REGION = mundus_tamriel_reach }
		}
	}
}

ek_grant_new_adventurer_in_region_effect = {
	random_character_with_royal_court = {
		limit = {
			exists = capital_province 
			capital_province = {
				geographical_region = $GEOGRAPHICAL_REGION$
			}
			save_temporary_scope_as = tmp_royal_court_owner # Used in 'inspiration_kingdom_modifier' to calculate draw towards this specific court in the region.
		}

		weight = {
			base = 1
			inspiration_royal_court_grandeur_attraction_modifier = yes
			inspiration_royal_court_oversaturation_penalty_modifier = yes
		}

		ek_grant_new_adventurer_in_character_realm_effect = yes
	}
}

ek_grant_new_adventurer_in_character_realm_effect = {
	save_scope_as = royal_court_owner
	every_sub_realm_barony = {
		title_province = {
			every_pool_character = {
				province = this
				limit = {
					ep1_is_valid_character_for_inspiration_trigger = yes
				}
				add_to_list = potential_inspired_people
			}
		}
	}

	random_in_list = {
		list = potential_inspired_people
		weight = {
			base = 1

			modifier = { # Adventurers are more likely to go on adventures
				add = 40
				has_trait = adventurer
			}

			# just the adventurer average skill value as a compare_modifier
			modifier = {
				add = {
					value = prowess
					multiply = 3
					add = {
						value = diplomacy
						multiply = 1.5
					}
					add = {
						value = learning
						multiply = 1.5
					}
					divide = 4
				}
			}

			# We don't want character dropping dead from old age, injuries, or disease right after they begin work on a project!
			compare_modifier = {
				value = health
				multiplier = 20
			}

			# 'Ambitious' characters are more likely to get an inspiration/seek patronage
			ai_value_modifier = {
				ai_greed = 0.25
				ai_boldness = 0.25
				ai_sociability = 0.10
				ai_rationality = 0.10
			}
		}
		save_scope_as = inspired_person
	}

	# If we were unable to find a valid pool character, create one.
	if = {
		limit = {
			NOT = { exists = scope:inspired_person }
		}
		create_character = {
			template = inspired_template
			location = scope:royal_court_owner.capital_province
			faith = scope:royal_court_owner.faith
			culture = scope:royal_court_owner.culture
			gender_female_chance = 50 
			save_scope_as = inspired_person
		}
	}
	# Clear the list in case this effect gets re-used in the same scope.
	every_in_list = {
		list = potential_inspired_people
		remove_from_list = potential_inspired_people
	}

	scope:inspired_person = {
		ek_grant_adventure_to_character_effect = { CHARACTER = this }
		# Travel to the new host's court.
		inspired_character_travel_to_court_effect = {
			INSPIRED_CHARACTER = scope:inspired_person
			NEW_HOST = scope:royal_court_owner
		}
	}
}

ek_grant_adventure_to_character_effect = {
	$CHARACTER$ = { 
		if = { 
			limit = {
				NOT = { exists = inspiration } 
			}
			# More likely to get an certain Inspiration type if we will produce higher quality Artifacts of that type.
			create_inspiration = adventure_inspiration
		}
	}
}