# EK NOTE: replaced vanilla references
#For use with HornedMythicalCreature / call this effect (set_up_horned_mythical_creature_effect = yes) in the line before creating the artifact 
#Use this in the artifact's name/description in the loc-file [ROOT.Char.Custom('HornedMythicalCreature')]
#Remember to clear the var:horned_mythical_creature in your after = { ... }
# EK TODO: set more mythical creatures
set_up_horned_mythical_creature_effect = {
	random_list = {
		100 = {
			set_variable = {
				name = regional_mythical_creature_trinket
				value = flag:dragon
			}
		}
		#50 = {
		#	set_variable = {
		#		name = horned_mythical_creature
		#		value = flag:tarasque
		#	}
		#}
		50 = {
			trigger = {	#EK Edit: Indriks in Summerset
				location = { geographical_region = mundus_tamriel_summerset_isles }
			}
			set_variable = {
				name = horned_mythical_creature
				value = flag:indrik
			}
		}
		#50 = {
		#	set_variable = {
		#		name = horned_mythical_creature
		#		value = flag:ophiotaurus
		#	}
		#}
		#50 = {
		#	set_variable = {
		#		name = horned_mythical_creature
		#		value = flag:monocerus
		#	}
		#}
		#50 = {
		#	set_variable = {
		#		name = horned_mythical_creature
		#		value = flag:centicore
		#	}
		#}
		#50 = {
		#	set_variable = {
		#		name = horned_mythical_creature
		#		value = flag:erchitu
		#	}
		#}
		#50 = {
		#	set_variable = {
		#		name = horned_mythical_creature
		#		value = flag:hadhayosh
		#	}
		#}
		#50 = {
		#	set_variable = {
		#		name = horned_mythical_creature
		#		value = flag:bulgu
		#	}
		#}
		#50 = {
		#	set_variable = {
		#		name = horned_mythical_creature
		#		value = flag:catoblepas
		#	}
		#}
		#5 = {
		#	trigger = { 
		#		location = { geographical_region = custom_iceland }
		#	}
		#	set_variable = {
		#		name = horned_mythical_creature
		#		value = flag:keewakw
		#	}
		#}

		###EK Additions
		50 = {
			set_variable = {
				name = horned_mythical_creature
				value = flag:unicorn
			}
		}
		###EK Additions END
	}
}

#For use with RegionalMythicalCreature / call this effect (set_up_regional_mythical_creature_effect = yes) in the line before creating the artifact 
#Use this in the artifact's name/description in the loc-file [ROOT.Char.Custom('RegionalMythicalCreature')] /and/ [ROOT.Char.Custom('RegionalMythicalCreatureLower')]
#Remember to clear the var:regional_mythical_creature_trinket in your after = { ... }
set_up_regional_mythical_creature_effect = {
	#EK DISABLED
	#if = {
	#	#Britannia
	#	limit = {
	#		location = { geographical_region = world_europe_west_britannia }
	#		NOT = { exists = var:regional_mythical_creature_trinket }
	#	}
	#	random_list = {
	#		50 = {
	#			set_variable = {
	#				name = regional_mythical_creature_trinket
	#				value = flag:water_leper
	#			}
	#		}
	#		50 = {
	#			set_variable = {
	#				name = regional_mythical_creature_trinket
	#				value = flag:fomorian
	#			}
	#		}
	#		50 = {
	#			set_variable = {
	#				name = regional_mythical_creature_trinket
	#				value = flag:fachan
	#			}
	#		}
	#	}
	#}
	#if = {
	#	#West Europe
	#	limit = {
	#		#EK EDIT
	#		#location = { geographical_region = world_europe_west }
	#		NOT = { exists = var:regional_mythical_creature_trinket }
	#	}
	#	random_list = {
	#		50 = {
	#			set_variable = {
	#				name = regional_mythical_creature_trinket
	#				value = flag:cockatrice
	#			}
	#		}
	#		50 = {
	#			set_variable = {
	#				name = regional_mythical_creature_trinket
	#				value = flag:lou_carcolh
	#			}
	#		}
	#		50 = {
	#			set_variable = {
	#				name = regional_mythical_creature_trinket
	#				value = flag:myrmecoleon
	#			}
	#		}
	#	}
	#}
	#else_if = {
	#	#North Europe
	#	limit = {
	#		location = { geographical_region = world_europe_north }
	#		NOT = { exists = var:regional_mythical_creature_trinket }
	#	}
	#	random_list = {
	#		50 = {
	#			set_variable = {
	#				name = regional_mythical_creature_trinket
	#				value = flag:antero_vipunen
	#			}
	#		}
	#		50 = {
	#			set_variable = {
	#				name = regional_mythical_creature_trinket
	#				value = flag:tjelvar
	#			}
	#		}
	#		50 = {
	#			set_variable = {
	#				name = regional_mythical_creature_trinket
	#				value = flag:fin
	#			}
	#		}
	#	}
	#}
	#else_if = {
	#	#South Europe
	#	limit = {
	#		location = { geographical_region = world_europe_south }
	#		NOT = { exists = var:regional_mythical_creature_trinket }
	#	}
	#	random_list = {
	#		50 = {
	#			set_variable = {
	#				name = regional_mythical_creature_trinket
	#				value = flag:basilisk
	#			}
	#		}
	#		50 = {
	#			set_variable = {
	#				name = regional_mythical_creature_trinket
	#				value = flag:lhombri
	#			}
	#		}
	#		50 = {
	#			set_variable = {
	#				name = regional_mythical_creature_trinket
	#				value = flag:argus_panoptes
	#			}
	#		}
	#	}
	#}
	#else_if = {
	#	#East Europe
	#	limit = {
	#		location = { geographical_region = world_europe_east }
	#		NOT = { exists = var:regional_mythical_creature_trinket }
	#	}
	#	random_list = {
	#		50 = {
	#			set_variable = {
	#				name = regional_mythical_creature_trinket
	#				value = flag:baba_yaga
	#			}
	#		}
	#		50 = {
	#			set_variable = {
	#				name = regional_mythical_creature_trinket
	#				value = flag:psoglav
	#			}
	#		}
	#		50 = {
	#			set_variable = {
	#				name = regional_mythical_creature_trinket
	#				value = flag:sirin
	#			}
	#		}
	#	}
	#}
	#else_if = {
	#	#West Africa
	#	limit = {
	#		location = { geographical_region = world_africa_west }
	#		NOT = { exists = var:regional_mythical_creature_trinket }
	#	}
	#	random_list = {
	#		50 = {
	#			set_variable = {
	#				name = regional_mythical_creature_trinket
	#				value = flag:mami_wata
	#			}
	#		}
	#		50 = {
	#			set_variable = {
	#				name = regional_mythical_creature_trinket
	#				value = flag:dodo
	#			}
	#		}
	#		50 = {
	#			set_variable = {
	#				name = regional_mythical_creature_trinket
	#				value = flag:utelif
	#			}
	#		}
	#	}
	#}
	#else_if = {
	#	#East Africa
	#	limit = {
	#		location = { geographical_region = world_africa_east }
	#		NOT = { exists = var:regional_mythical_creature_trinket }
	#	}
	#	random_list = {
	#		50 = {
	#			set_variable = {
	#				name = regional_mythical_creature_trinket
	#				value = flag:liqimsa
	#			}
	#		}
	#		50 = {
	#			set_variable = {
	#				name = regional_mythical_creature_trinket
	#				value = flag:bulgu
	#			}
	#		}
	#		50 = {
	#			set_variable = {
	#				name = regional_mythical_creature_trinket
	#				value = flag:opimachus
	#			}
	#		}
	#	}
	#}
	#else_if = {
	#	#Middle East
	#	limit = {
	#		location = { geographical_region = world_middle_east }
	#		NOT = { exists = var:regional_mythical_creature_trinket }
	#	}
	#	random_list = {
	#		50 = {
	#			set_variable = {
	#				name = regional_mythical_creature_trinket
	#				value = flag:manticore
	#			}
	#		}
	#		50 = {
	#			set_variable = {
	#				name = regional_mythical_creature_trinket
	#				value = flag:behemoth
	#			}
	#		}
	#		50 = {
	#			set_variable = {
	#				name = regional_mythical_creature_trinket
	#				value = flag:humbaba
	#			}
	#		}
	#	}
	#}
	#else_if = {
	#	#India
	#	limit = {
	#		location = { geographical_region = world_india }
	#		NOT = { exists = var:regional_mythical_creature_trinket }
	#	}
	#	random_list = {
	#		50 = {
	#			set_variable = {
	#				name = regional_mythical_creature_trinket
	#				value = flag:makara
	#			}
	#		}
	#		50 = {
	#			set_variable = {
	#				name = regional_mythical_creature_trinket
	#				value = flag:yali
	#			}
	#		}
	#		50 = {
	#			set_variable = {
	#				name = regional_mythical_creature_trinket
	#				value = flag:rakshasha
	#			}
	#		}
	#	}
	#}
	#else_if = {
	#	#East Asia
	#	limit = {
	#		location = { geographical_region = world_tibet }
	#		NOT = { exists = var:regional_mythical_creature_trinket }
	#	}
	#	random_list = {
	#		50 = {
	#			set_variable = {
	#				name = regional_mythical_creature_trinket
	#				value = flag:manaul
	#			}
	#		}
	#		50 = {
	#			set_variable = {
	#				name = regional_mythical_creature_trinket
	#				value = flag:bashee
	#			}
	#		}
	#		50 = {
	#			set_variable = {
	#				name = regional_mythical_creature_trinket
	#				value = flag:camphruch
	#			}
	#		}
	#	}
	#}
	#Fallback
	#else = {
		random_list = {
			100 = {
				set_variable = {
					name = regional_mythical_creature_trinket
					value = flag:dragon
				}
			}
			50 = {	#EK Edit: Moved these two creatures from above into this list with dragons	#EK Note: Re-enabled these - basilisks are mentioned in PGE3 and Daggerfall
				set_variable = {
					name = regional_mythical_creature_trinket
					value = flag:basilisk
				}
			}
			50 = {
				trigger = {	#EK Edit: only appear in the Arena guidebook and UOL Ted posts, I've decided to limit them to High Rock
					location = { geographical_region = mundus_tamriel_high_rock }
				}
				set_variable = {
					name = regional_mythical_creature_trinket
					value = flag:cockatrice
				}
			}	#EK Edit END
			#5 = {
			#	set_variable = {
			#		name = regional_mythical_creature_trinket
			#		value = flag:cipactli
			#	}
			#}
		}
	#}	
}
#EK TODO: add TES local farm animals
select_local_farm_animal_effect = {
	random_list = {
		50 = {
			modifier = { #EK EDIT: excluded Morrowind, Black Marsh
				factor = 0
				location = {
					OR = {
						geographical_region = mundus_tamriel_morrowind
						geographical_region = mundus_tamriel_black_marsh
					}
				}
			}
			set_variable = {
				name = local_farm_animal
				value = flag:goat
			}
		}
		50 = {
			modifier = { #EK EDIT: excluded Morrowind, Black Marsh
				factor = 0
				location = {
					OR = {
						geographical_region = mundus_tamriel_morrowind
						geographical_region = mundus_tamriel_black_marsh
					}
				}
			}
			set_variable = {
				name = local_farm_animal
				value = flag:chicken
			}
		}
		50 = {
			modifier = { #EK EDIT: excluded Morrowind, Black Marsh
				factor = 0
				location = {
					OR = {
						geographical_region = mundus_tamriel_morrowind
						geographical_region = mundus_tamriel_black_marsh
					}
				}
			}
			set_variable = {
				name = local_farm_animal
				value = flag:cow
			}
		}
		50 = {
			modifier = { #EK EDIT: excluded Morrowind, Black Marsh
				factor = 0
				location = {
					OR = {
						geographical_region = mundus_tamriel_morrowind
						geographical_region = mundus_tamriel_black_marsh
					}
				}
			}
			set_variable = {
				name = local_farm_animal
				value = flag:sheep
			}
		}
		50 = {
			#EK DISABLED
			#modifier = {
			#	factor = 0
			#	faith = {
			#		OR = {
			#			religion_tag = islam_religion
			#			religion_tag = judaism_religion
			#		}
			#	}
			#}
			modifier = { #EK EDIT: excluded Morrowind, Black Marsh
				factor = 0
				location = {
					OR = {
						geographical_region = mundus_tamriel_morrowind
						geographical_region = mundus_tamriel_black_marsh
					}
				}
			}
			set_variable = {
				name = local_farm_animal
				value = flag:pig
			}
		}
		#EK DISABLED: no proper place, perhaps in akavir
		#50 = {			
		#	modifier = {
		#		factor = 0
		#		location = {
		#			NOR = {
		#				geographical_region = world_tibet
		#				geographical_region = ghw_region_mongolia
		#			}
		#		}
		#	}
		#	set_variable = {
		#		modifier = {
		#			factor = 0
		#			always = yes
		#		}
		#		name = local_farm_animal
		#		value = flag:yak
		#	}
		#}
		#EK ADDITION
		50 = { #Guar
			modifier = {
				factor = 0
				location = {
					NOR = {
						geographical_region = mundus_tamriel_morrowind
						geographical_region = mundus_tamriel_black_marsh
					}
				}
			}
			set_variable = {
				name = local_farm_animal
				value = flag:guar
			}
		}
		50 = { #Bantam Guar
			modifier = {
				factor = 0
				location = {
					NOR = {
						geographical_region = mundus_tamriel_morrowind
						geographical_region = mundus_tamriel_black_marsh
					}
				}
			}
			set_variable = {
				name = local_farm_animal
				value = flag:bantam_guar
			}
		}
		50 = { #Echatere
			modifier = {
				factor = 0
				location = {
					NOT = {	geographical_region = mundus_tamriel_high_rock_wrothgar }
				}
			}
			set_variable = {
				name = local_farm_animal
				value = flag:echatere
			}
		}
		50 = { #Beetle
			modifier = {
				factor = 0
				location = {
					NOR = {
						geographical_region = mundus_tamriel_morrowind
						geographical_region = mundus_tamriel_hammerfell
						geographical_region = mundus_tamriel_valenwood
					}
				}
			}
			set_variable = {
				name = local_farm_animal
				value = flag:beetle
			}
		}
		#EK ADDITION END
	}
}

# Plague effect, get a regionally appropriate faith for people to scapegoat
select_scapegoat_faith_effect = {
	random_list = {
		100 = { # Courtier in your realm with hostile faith
			trigger = {
				any_courtier_or_guest = {
					save_temporary_scope_as = courtier_to_check
					root.faith = {
						faith_hostility_level = {
							target = scope:courtier_to_check.faith
							value >= faith_hostile_level
						}
					}
				}
			}
			random_courtier_or_guest = {
				limit = {
					save_temporary_scope_as = courtier_to_check
					root.faith = {
						faith_hostility_level = {
							target = scope:courtier_to_check.faith
							value >= faith_hostile_level
						}
					}
				}
				faith = { save_scope_as = faith_to_blame }
			}
		}
		100 = { # Vassal in your realm with hostile faith
			trigger = {
				top_liege ?= {
					any_vassal_or_below = {
						save_temporary_scope_as = courtier_to_check
						root.faith = {
							faith_hostility_level = {
								target = scope:courtier_to_check.faith
								value >= faith_hostile_level
							}
						}
					}
				}
			}
			top_liege = {
				random_vassal_or_below = {
					limit = {
						save_temporary_scope_as = courtier_to_check
						root.faith = {
							faith_hostility_level = {
								target = scope:courtier_to_check.faith
								value >= faith_hostile_level
							}
						}
					}
					faith = { save_scope_as = faith_to_blame }
				}
			}
		}
		100 = { # Neighbouring hostile faith
			trigger = {
				any_neighboring_and_across_water_top_liege_realm_owner = {
					any_sub_realm_county = {
						save_temporary_scope_as = county_to_check
						root.faith = {
							faith_hostility_level = {
								target = scope:county_to_check.faith
								value >= faith_hostile_level
							}
						}
					}
				}
			}
			random_neighboring_and_across_water_top_liege_realm_owner = {
				limit = {
					any_sub_realm_county = {
						save_temporary_scope_as = county_to_check
						root.faith = {
							faith_hostility_level = {
								target = scope:county_to_check.faith
								value >= faith_hostile_level
							}
						}
					}
				}
				random_sub_realm_county = {
					limit = {
						save_temporary_scope_as = county_to_check
						root.faith = {
							faith_hostility_level = {
								target = scope:county_to_check.faith
								value >= faith_hostile_level
							}
						}
					}
					faith = { save_scope_as = faith_to_blame }
				}
			}
		}
		10 = { # Regional, fallback
			random_list = {
				#EK DISABLED: removed vanilla general faiths, that setup was too general for us to adapt
				#EK ADDITION: Generic scapegoat faiths
				# Daedric Cults can basically always be blamed
				1000 = { #Azura
					trigger = {
						NOT = { root.faith.religion = religion:azura_religion }
					}
					religion:azura_religion = {
						random_faith = {
							save_scope_as = faith_to_blame
						}
					}
				}
				1000 = { #Boethiah
					trigger = {
						NOT = { root.faith.religion = religion:boethiah_religion }
					}
					religion:boethiah_religion = {
						random_faith = {
							save_scope_as = faith_to_blame
						}
					}
				}
				1000 = { #Clavicus Vile
					trigger = {
						NOT = { root.faith.religion = religion:clavicus_religion }
					}
					religion:clavicus_religion = {
						random_faith = {
							save_scope_as = faith_to_blame
						}
					}
				}
				1000 = { #Hermaeus Mora
					trigger = {
						NOT = { root.faith.religion = religion:hermaeus_religion }
					}
					religion:hermaeus_religion = {
						random_faith = {
							save_scope_as = faith_to_blame
						}
					}
				}
				1000 = { #Hircine
					trigger = {
						NOT = { root.faith.religion = religion:hircine_religion }
					}
					religion:hircine_religion = {
						random_faith = {
							save_scope_as = faith_to_blame
						}
					}
				}
				1000 = { #Malacath
					trigger = {
						NOT = { root.faith.religion = religion:malacath_religion }
					}
					religion:malacath_religion = {
						random_faith = {
							save_scope_as = faith_to_blame
						}
					}
				}
				1000 = { #Mehrunes Dagon
					trigger = {
						NOT = { root.faith.religion = religion:mehrunes_religion }
					}
					religion:mehrunes_religion = {
						random_faith = {
							save_scope_as = faith_to_blame
						}
					}
				}
				1000 = { #Mephala
					trigger = {
						NOT = { root.faith.religion = religion:mephala_religion }
					}
					religion:mephala_religion = {
						random_faith = {
							save_scope_as = faith_to_blame
						}
					}
				}
				1000 = { #Meridia
					trigger = {
						NOT = { root.faith.religion = religion:meridia_religion }
					}
					religion:meridia_religion = {
						random_faith = {
							save_scope_as = faith_to_blame
						}
					}
				}
				1000 = { #Molag Bal
					trigger = {
						NOT = { root.faith.religion = religion:molag_religion }
					}
					religion:molag_religion = {
						random_faith = {
							save_scope_as = faith_to_blame
						}
					}
				}
				1000 = { #Namira
					trigger = {
						NOT = { root.faith.religion = religion:namira_religion }
					}
					religion:namira_religion = {
						random_faith = {
							save_scope_as = faith_to_blame
						}
					}
				}
				1000 = { #Nocturnal
					trigger = {
						NOT = { root.faith.religion = religion:nocturnal_religion }
					}
					religion:nocturnal_religion = {
						random_faith = {
							save_scope_as = faith_to_blame
						}
					}
				}
				1000 = { #Peryite
					trigger = {
						NOT = { root.faith.religion = religion:peryite_religion }
					}
					religion:peryite_religion = {
						random_faith = {
							save_scope_as = faith_to_blame
						}
					}
				}
			}
		}
	}
}
